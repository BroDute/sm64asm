.orga 0xf71b4
.area 0x84, 0x00
	ADDIU V0, A0, 0x2
	ADDIU V1, A1, 0x4
	ADDIU A1, R0, 0x0
	LI AT, 65536. / 4 ; 65536.0f / WORLD_SCALE
	MTC1 AT, F0
	ADDIU A2, R0, 0x8
@@b:
	LWC1 F2, 0xFFFC (V1)
	MUL.S F2, F2, F0
	TRUNC.W.S F2, F2
	MFC1 AT, F2
	NOP
	SH AT, 0x1E (V0)
	SRL AT, AT, 0x10
	SH AT, 0xFFFE (V0)
	ANDI AT, A1, 0x1
	ADDIU A3, R0, 0x0
	BNEZ AT, @@a
	ADDIU T0, R0, 0x0
	LWC1 F2, 0x0 (V1)
	MUL.S F2, F2, F0
	TRUNC.W.S F2, F2
	MFC1 T0, F2
	NOP
	SRL A3, T0, 0x10
@@a:
	SH T0, 0x20 (V0)
	SH A3, 0x0 (V0)
	ADDIU V0, V0, 0x4
	ADDIU A1, A1, 0x1
	BNE A1, A2, @@b
	ADDIU V1, V1, 0x8
	ADDIU AT, R0, 0x1
	JR RA
	SH AT, 0x1E (A0)
.endarea

; 0x42C80000 0x10(SP)
; 0x46EA6000 0x14(SP)
; A2=0x42340000
; A3=0x3FAAAAAB
.orga 0x36CD4
.area 0x68, 0x00
	ADDIU A0, V0, 0
	LUI T4, 0x8033
	LW T4, 0xDEF0 (T4)
	LH T5, 0x1A (T4)
	LH T6, 0x1C (T4)
	MTC1 T5, F4
	MTC1 T6, F8
	CVT.S.W F6, F4
	CVT.S.W F10, F8
	DIV.S F16, F6, F10
	MFC1 A3, F16
	LW T7, 0x40 (SP)
	LUI AT, 0x3F80
	MTC1 AT, F10
	LH T0, 0x20 (T7)
	LW A2, 0x1C (T7)
	SRL T0, T0, 3 ; log2(WORLD_SCALE)
	MTC1 T0, F18
	ADDIU A1, SP, 0x3E
	CVT.S.W F4, F18
	SWC1 F4, 0x10 (SP)
	LH T1, 0x22 (T7)
	SRL T1, T1, 3 ; log2(WORLD_SCALE)
	SWC1 F10, 0x18 (SP)
	MTC1 T1, F8
	SW V0, 0x38(SP)
.endarea