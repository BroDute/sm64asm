.orga 0x858C0
;START
	ADDIU SP, SP, 0xFFE8
	SW RA, 0x0014 (SP)

;Get Level ID
	LUI T2, 0x8033
	LH T3, 0xddf8 (T2)

;get Loop length
	LUI T4, 0x802C
	ORI T5, T4, 0xA8BE
	ORI T4, T4, 0xA7EC

;LOOP 858dc
LOOP:
	LBU T2, 0x0000 (T4)
	BNE T3, T2, LOOPEND2
	NOP

;get current collission
	LUI V0, 0x8034
	LW V0, 0xB1D8 (V0)
	LH V0, 0x0000 (V0)

	ADDIU T7, T4, 0x0006

;SUBLOOP 858f8
SUBLOOP:
	LBU T6, 0x0001 (T4)
	LBU A1, 0x0002 (T4)
	ADDIU T4, T4, 0x0002
	BEQ T6, V0, SET_MUSIC
	NOP
	BNE T7, T4, SUBLOOP
	NOP

;LOOPEND 
LOOPEND:
	ADDIU T4, T4, 0x0001
	BNE T4, T5, LOOP
	NOP
	BEQ R0, R0, END
	NOP

;SET MUSIC 85928
SET_MUSIC:

;CHECK
CHECK:
	LUI T0, 0x8022
	LH T0, 0x261C (T0)
	ANDI T5, T0, 0x3F
	BEQ T5, A1, END
	NOP
	JAL 0x80320544
	OR A0, R0, R0

;END 85944
END:
	LW RA, 0x0014 (SP)
	ADDIU SP, SP, 0x0018
	JR RA
	nop

;LOOPEND 2 85954
LOOPEND2:
	ADDIU T4, T4, 0x0007
	BNE T4, T5, LOOP
	NOP
	BEQ R0, R0, END
	NOP
